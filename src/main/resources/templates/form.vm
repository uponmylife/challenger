#parse("header.vm")

<form method="POST" action="/save" class="form-control">
    <input name="subjectId" id="subjectId" type="text" class="form-control" value="$!subjectId" readonly>
    <input id="subjectName" name="subjectName" type="text" class="form-control" value="$!subject.name">
    #foreach($goal in $subject.goals)
    <div class="form_$foreach.index" style="width: 400px; padding:7px; margin:7px">
        <input id="goalTitle$foreach.index" name="goalTitle$foreach.index" type="text" size="20" value="$!goal.title">
        more than
        <input id="goalCount$foreach.index" name="goalCount$foreach.index" type="number" size="1" value="$!goal.count">
        times a week
    </div>
    #end
    <div class="text-right">
        <a href="#" class="btn btn-default" onclick="emptySubject()">New</a>
        <a href="#" class="btn btn-default" onclick="deleteSubject()">Delete</a>
        <button type="submit" class="btn btn-default">Save</button>
        <a href="/$!{subjectId}" class="btn btn-default" role="button">Cancel</a>
    </div>
</form>


<script type="text/javascript">
window.onload=function(){
    $('.form_0').css('background-color', getSlotColor(0));
    $('.form_1').css('background-color', getSlotColor(1));
    $('.form_2').css('background-color', getSlotColor(2));
}

function emptySubject() {
    $('#subjectId').val('');
    $('#subjectName').val('');
    $('#goalTitle0').val('');
    $('#goalCount0').val('');
    $('#goalTitle1').val('');
    $('#goalCount1').val('');
    $('#goalTitle2').val('');
    $('#goalCount2').val('');
}

function deleteSubject() {
    $.post('/delete', {subjectId: '$subjectId'}, function(result) {
        location.href = '/';
    });
}
</script>

#parse("footer.vm")